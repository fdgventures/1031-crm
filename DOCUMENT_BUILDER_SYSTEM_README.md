# Document Builder & Digital Signature System

–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–µ–π (–∞–Ω–∞–ª–æ–≥ DocuSign).

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
3. [–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏](#–æ—Å–Ω–æ–≤–Ω—ã–µ-—Ñ—É–Ω–∫—Ü–∏–∏)
4. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
5. [–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è](#–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ-–ø–æ–ª—è)
6. [–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–µ–π](#—Å–∏—Å—Ç–µ–º–∞-–ø–æ–¥–ø–∏—Å–µ–π)

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ Document Builder –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- ‚úçÔ∏è –°–æ–∑–¥–∞–≤–∞—Ç—å —à–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∞ A4 —Å –±–æ–≥–∞—Ç—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º —Ç–µ–∫—Å—Ç–∞
- üîÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- üìù –°–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —à–∞–±–ª–æ–Ω–æ–≤ (header/footer) –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚ú® –£–ø—Ä–∞–≤–ª—è—Ç—å —Ü–∏—Ñ—Ä–æ–≤—ã–º–∏ –ø–æ–¥–ø–∏—Å—è–º–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- üìÑ –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤ —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- üñäÔ∏è –†–∞–∑–º–µ—â–∞—Ç—å –ø–æ–ª—è –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π –º–µ—Ç–æ–¥–æ–º drag-and-drop
- üì® –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ –ø–æ–¥–ø–∏—Å—å —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Å—Ç–∞—Ç—É—Å–∞

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏—è
–§–∞–π–ª: `supabase/migrations/038_create_document_builder_and_signatures_system.sql`

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### 1. `document_template_components`
–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (header/footer) –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤.

**–ü–æ–ª—è:**
- `id` - ID –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `component_type` - –¢–∏–ø: 'header' –∏–ª–∏ 'footer'
- `content` - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ (JSONB)
- `qi_company_id` - –°–≤—è–∑—å —Å QI –∫–æ–º–ø–∞–Ω–∏–µ–π

#### 2. `document_templates`
–®–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

**–ü–æ–ª—è:**
- `id` - ID —à–∞–±–ª–æ–Ω–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- `template_type` - –¢–∏–ø: 'transaction', 'exchange', 'property', 'eat'
- `content` - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (JSONB)
- `dynamic_fields` - –ú–∞—Å—Å–∏–≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ–π
- `header_component_id`, `footer_component_id` - –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `is_active` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ —à–∞–±–ª–æ–Ω

#### 3. `template_signature_fields`
–ü–æ–ª—è –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π –≤ —à–∞–±–ª–æ–Ω–µ (drag-and-drop –ø–æ–∑–∏—Ü–∏–∏).

**–ü–æ–ª—è:**
- `template_id` - ID —à–∞–±–ª–æ–Ω–∞
- `field_name` - –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è
- `field_type` - –¢–∏–ø: 'signature', 'date', 'text'
- `position_x`, `position_y` - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `page_number` - –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `width`, `height` - –†–∞–∑–º–µ—Ä—ã –ø–æ–ª—è
- `signer_role` - –†–æ–ª—å –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–∞
- `signing_order` - –ü–æ—Ä—è–¥–æ–∫ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è

#### 4. `vesting_name_signatures`
–¶–∏—Ñ—Ä–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è vesting names –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–ü–æ–ª—è:**
- `tax_account_id` - ID tax account
- `vesting_name` - –ù–∞–∑–≤–∞–Ω–∏–µ vesting name
- `signature_type` - –¢–∏–ø: 'property' –∏–ª–∏ 'entity'
- `signature_text` - –¢–µ–∫—Å—Ç –ø–æ–¥–ø–∏—Å–∏
- `signature_font` - –®—Ä–∏—Ñ—Ç –ø–æ–¥–ø–∏—Å–∏
- `signature_id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–¥–ø–∏—Å–∏ (–∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π)

**Property type:**
- `printed_name` - –ò–º—è –ø–æ–¥ –ø–æ–¥–ø–∏—Å—å—é

**Entity type:**
- `entity_name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
- `by_name` - –ò–º—è –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–∞ (BY:)
- `its_title` - –î–æ–ª–∂–Ω–æ—Å—Ç—å (ITS:)

#### 5. `admin_signatures`
–¶–∏—Ñ—Ä–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ QI.

**–ü–æ–ª—è:**
- `admin_user_id` - ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `qi_company_id` - ID QI –∫–æ–º–ø–∞–Ω–∏–∏
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –ø–æ–ª—è –ø–æ–¥–ø–∏—Å–∏ –∫–∞–∫ –≤ `vesting_name_signatures`

#### 6. `documents`
–°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤.

**–ü–æ–ª—è:**
- `template_id` - ID —à–∞–±–ª–æ–Ω–∞
- `document_name`, `document_number` - –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –Ω–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `transaction_id`, `exchange_id`, `property_id`, `eat_parked_file_id` - –°–≤—è–∑–∏ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏
- `content` - –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- `pdf_url` - URL PDF —Ñ–∞–π–ª–∞
- `status` - –°—Ç–∞—Ç—É—Å: 'draft', 'pending_signatures', 'fully_signed', etc.

#### 7. `document_signature_requests`
–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ–¥–ø–∏—Å—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

**–ü–æ–ª—è:**
- `document_id` - ID –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `template_field_id` - ID –ø–æ–ª—è –ø–æ–¥–ø–∏—Å–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞
- `signer_user_id`, `signer_email` - –ü–æ–¥–ø–∏—Å–∞–Ω—Ç
- `admin_signature_id`, `vesting_signature_id` - –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø–æ–¥–ø–∏—Å—å
- `status` - –°—Ç–∞—Ç—É—Å: 'pending', 'sent', 'viewed', 'signed', 'declined'
- `signed_at` - –í—Ä–µ–º—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è
- `signature_image_url` - URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –ù–∞–≤–∏–≥–∞—Ü–∏—è

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–∫–æ–Ω–∫–∞ **Document Builder** –≤ –ª–µ–≤—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—É—é –ø–∞–Ω–µ–ª—å:
- –ü—É—Ç—å: `/document-builder`
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/app/(pages)/document-builder/page.tsx`

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

**–®–∞–≥–∏:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Document Builder
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞ (Transaction, Exchange, Property, EAT)
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
6. –í—Å—Ç–∞–≤–ª—è–π—Ç–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –∏–∑ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
7. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—è –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
8. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —à–∞–±–ª–æ–Ω

**–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞:**
- –ñ–∏—Ä–Ω—ã–π, –∫—É—Ä—Å–∏–≤, –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—ã–π
- –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ: –≤–ª–µ–≤–æ, –ø–æ —Ü–µ–Ω—Ç—Ä—É, –≤–ø—Ä–∞–≤–æ, –ø–æ —à–∏—Ä–∏–Ω–µ
- –°–ø–∏—Å–∫–∏: –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ
- –§–æ—Ä–º–∞—Ç A4 (210mm √ó 297mm)

### 3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

**–§–æ—Ä–º–∞—Ç –≤—Å—Ç–∞–≤–∫–∏:** `<<field name>>`

#### Transaction Fields
```
<<transaction number>>  - –ù–æ–º–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
<<contract price>>      - –¶–µ–Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
<<contract date>>       - –î–∞—Ç–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
<<sale type>>           - –¢–∏–ø –ø—Ä–æ–¥–∞–∂–∏
<<seller name>>         - –ò–º—è –ø—Ä–æ–¥–∞–≤—Ü–∞
<<buyer name>>          - –ò–º—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
<<property address>>    - –ê–¥—Ä–µ—Å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
<<closing agent>>       - –ó–∞–∫—Ä—ã–≤–∞—é—â–∏–π –∞–≥–µ–Ω—Ç
```

#### Exchange Fields
```
<<exchange number>>     - –ù–æ–º–µ—Ä –æ–±–º–µ–Ω–∞
<<tax account name>>    - –ò–º—è tax account
<<day 45 date>>         - –î–∞—Ç–∞ 45 –¥–Ω–µ–π
<<day 180 date>>        - –î–∞—Ç–∞ 180 –¥–Ω–µ–π
<<total sale proceeds>> - –û–±—â–∞—è —Å—É–º–º–∞ –ø—Ä–æ–¥–∞–∂–∏
<<total purchase>>      - –û–±—â–∞—è —Å—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏
<<exchange status>>     - –°—Ç–∞—Ç—É—Å –æ–±–º–µ–Ω–∞
```

#### Property Fields
```
<<property address>>    - –ê–¥—Ä–µ—Å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
<<property type>>       - –¢–∏–ø –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
<<property value>>      - –°—Ç–æ–∏–º–æ—Å—Ç—å
<<legal description>>   - –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
```

#### EAT Fields
```
<<eat number>>          - –ù–æ–º–µ—Ä EAT
<<eat name>>            - –ù–∞–∑–≤–∞–Ω–∏–µ EAT
<<total acquired value>> - –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–Ω–æ–π –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
<<total parked value>>  - –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏–ø–∞—Ä–∫–æ–≤–∞–Ω–Ω–æ–π –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
<<day 45 date>>         - –î–∞—Ç–∞ 45 –¥–Ω–µ–π
<<day 180 date>>        - –î–∞—Ç–∞ 180 –¥–Ω–µ–π
<<eat state>>           - –®—Ç–∞—Ç EAT
<<eat status>>          - –°—Ç–∞—Ç—É—Å EAT
```

### 4. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–µ–π

#### 4.1. –ü–æ–¥–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Vesting Names)

**–ì–¥–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å:**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `<SignatureManager />`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è Tax Account

**–¢–∏–ø—ã –ø–æ–¥–ø–∏—Å–µ–π:**

**Property –ø–æ–¥–ø–∏—Å—å:**
```
[Signature Text in chosen font]
_______________________________
Printed Name
```

**Entity –ø–æ–¥–ø–∏—Å—å:**
```
Entity Name
_______________________________
[Signature Text in chosen font]

BY: [Name]
ITS: [Title]
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```tsx
import SignatureManager from '@/components/SignatureManager';

<SignatureManager 
  taxAccountId={taxAccount.id}
  vestingNames={taxAccount.vesting_names}
/>
```

#### 4.2. –ü–æ–¥–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

**–ì–¥–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å:**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `<AdminSignatureManager />`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º QI –≤ –∞–¥–º–∏–Ω–∫–µ

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```tsx
import AdminSignatureManager from '@/components/AdminSignatureManager';

<AdminSignatureManager 
  qiCompanyId={qiCompany.id}
  adminUsers={admins}
/>
```

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤

#### 5.1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `<TransactionDocuments />`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```tsx
import TransactionDocuments from '@/components/TransactionDocuments';

<TransactionDocuments transactionId={transaction.id} />
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
1. –ö–Ω–æ–ø–∫–∞ "Create Template"
2. –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ –∏–∑ —Å–ø–∏—Å–∫–∞
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
4. –°–ø–∏—Å–æ–∫ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏
5. –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é/–ø—Ä–æ—Å–º–æ—Ç—Ä—É

#### 5.2. –ò–∑ –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è:
- `<ExchangeDocuments exchangeId={id} />`
- `<PropertyDocuments propertyId={id} />`
- `<EATDocuments eatParkedFileId={id} />`

### 6. –†–∞–±–æ—Ç–∞ —Å –ø–æ–¥–ø–∏—Å—è–º–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞
2. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ–π
3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç signature requests –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–µ–π –≤ —à–∞–±–ª–æ–Ω–µ
4. –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–∞ –ø–æ–¥–ø–∏—Å—å
5. –ü–æ–¥–ø–∏—Å–∞–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
6. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–µ–π
7. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–µ–π

**–°—Ç–∞—Ç—É—Å—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞:**
- `draft` - –ß–µ—Ä–Ω–æ–≤–∏–∫
- `pending_signatures` - –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å–µ–π
- `partially_signed` - –ß–∞—Å—Ç–∏—á–Ω–æ –ø–æ–¥–ø–∏—Å–∞–Ω
- `fully_signed` - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–ø–∏—Å–∞–Ω
- `completed` - –ó–∞–≤–µ—Ä—à–µ–Ω
- `cancelled` - –û—Ç–º–µ–Ω–µ–Ω

## üìö API –§—É–Ω–∫—Ü–∏–∏

### –®–∞–±–ª–æ–Ω—ã
```typescript
// –ü–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω—ã
getDocumentTemplates(templateType?: TemplateType, qiCompanyId?: string)

// –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω
createDocumentTemplate(template: Partial<DocumentTemplate>)

// –û–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω
updateDocumentTemplate(id: number, updates: Partial<DocumentTemplate>)

// –£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω
deleteDocumentTemplate(id: number)
```

### –ü–æ–¥–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```typescript
// –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∏ tax account
getVestingNameSignatures(taxAccountId: number)

// –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å—å
createVestingNameSignature(signature: Partial<VestingNameSignature>)

// –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å—å
updateVestingNameSignature(id: number, updates: Partial<VestingNameSignature>)
```

### –ü–æ–¥–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
```typescript
// –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∏ –∞–¥–º–∏–Ω–æ–≤
getAdminSignatures(qiCompanyId?: string)

// –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å—å –∞–¥–º–∏–Ω–∞
createAdminSignature(signature: Partial<AdminSignature>)

// –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å—å –∞–¥–º–∏–Ω–∞
updateAdminSignature(id: number, updates: Partial<AdminSignature>)
```

### –î–æ–∫—É–º–µ–Ω—Ç—ã
```typescript
// –ü–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã
getDocuments(filters?: {
  transactionId?: number;
  exchangeId?: number;
  propertyId?: number;
  eatParkedFileId?: number;
})

// –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
createDocument(document: Partial<Document>)

// –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
updateDocument(id: number, updates: Partial<Document>)

// –ü–æ–¥–ø–∏—Å–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
signDocumentSignatureRequest(
  id: number,
  signatureImageUrl: string,
  ipAddress?: string,
  userAgent?: string
)
```

## üé® –î–æ—Å—Ç—É–ø–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π

```typescript
const SIGNATURE_FONTS = [
  'Brush Script MT',
  'Lucida Handwriting',
  'Segoe Script',
  'Monotype Corsiva',
  'Freestyle Script',
  'Edwardian Script ITC',
];
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é
supabase db push
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS (Row Level Security)
–ú–∏–≥—Ä–∞—Ü–∏—è —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏:
- –í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å —à–∞–±–ª–æ–Ω—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- –í–ª–∞–¥–µ–ª—å—Ü—ã QI –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–ø–∏—Å—è–º–∏ –∞–¥–º–∏–Ω–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ –ø–æ–¥–ø–∏—Å—è–º–∏

### 3. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:**
```tsx
import TransactionDocuments from '@/components/TransactionDocuments';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
<TransactionDocuments transactionId={transaction.id} />
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```tsx
import SignatureManager from '@/components/SignatureManager';

// –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö tax account
<SignatureManager 
  taxAccountId={taxAccount.id}
  vestingNames={vestingNames}
/>
```

**–ê–¥–º–∏–Ω–∫–∞ QI:**
```tsx
import AdminSignatureManager from '@/components/AdminSignatureManager';

// –í –∞–¥–º–∏–Ω–∫–µ QI
<AdminSignatureManager 
  qiCompanyId={qiCompany.id}
  adminUsers={admins}
/>
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ Purchase Agreement

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Document Builder
2. –í—ã–±–µ—Ä–∏—Ç–µ "Transaction"
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω "Purchase Agreement"
4. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç:
```
PURCHASE AGREEMENT

This Purchase Agreement is entered into on <<contract date>> between:

Seller: <<seller name>>
Buyer: <<buyer name>>

Property: <<property address>>
Purchase Price: $<<contract price>>

[–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞...]

___________________________
Seller Signature

___________________________
Buyer Signature
```
5. –î–æ–±–∞–≤—å—Ç–µ 2 –ø–æ–ª—è –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π (Seller –∏ Buyer)
6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —à–∞–±–ª–æ–Ω

### –ü—Ä–∏–º–µ—Ä 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–ø–∏—Å–∏ Entity —Ç–∏–ø–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Tax Account
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª –ø–æ–¥–ø–∏—Å–µ–π
3. –í—ã–±–µ—Ä–∏—Ç–µ vesting name
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø "Entity"
5. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - Entity Name: "ABC Holdings LLC"
   - Signature Text: "John Smith"
   - BY: "John Smith"
   - ITS: "Managing Member"
6. –í—ã–±–µ—Ä–∏—Ç–µ —à—Ä–∏—Ñ—Ç: "Brush Script MT"
7. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
ABC Holdings LLC
____________________
John Smith

BY: John Smith
ITS: Managing Member
```

## üîç Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –Ω–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç –ø–æ–ª—è —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç: `<<field name>>` (—Å –¥–≤—É–º—è —É–≥–ª–æ–≤—ã–º–∏ —Å–∫–æ–±–∫–∞–º–∏ —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã)

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–¥–ø–∏—Å—å –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü—Ä–æ–±–ª–µ–º–∞: –î–æ–∫—É–º–µ–Ω—Ç –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –Ω–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–æ–≤
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [ ] –ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –ø–æ–¥–ø–∏—Å—å
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (DocuSign API)
- [ ] –ê—É–¥–∏—Ç —Ç—Ä–µ–π–ª –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã Document Builder –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º.

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-01-07  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-07

